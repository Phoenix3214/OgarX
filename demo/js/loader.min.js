const IMG_DIM=512;onmessage=async a=>{const{data:b}=a;if(!b)return;let c;const d=new OffscreenCanvas(0,500),e=d.getContext("2d");e.font="bold 320px Lato",e.fillStyle="white",e.strokeStyle="black",e.textAlign="center",e.lineWidth=26,e.textBaseline="middle";const f=e.measureText(b.name);f.width&&(d.width=Math.ceil(f.width+40),e.font="bold 320px Lato",e.fillStyle="white",e.strokeStyle="black",e.textAlign="center",e.lineWidth=26,e.textBaseline="middle",e.clearRect(0,0,d.width,d.height),e.strokeText(b.name,d.width>>1,d.height>>1),e.fillText(b.name,d.width>>1,d.height>>1),c=d.transferToImageBitmap());try{const a=await fetch(b.skin),d=await a.blob(),e=await createImageBitmap(d,{premultiplyAlpha:"none",resizeQuality:"high",resizeWidth:IMG_DIM,resizeHeight:IMG_DIM});postMessage({id:b.id,skin:e,name:c},c?[e,c]:[e])}catch{c?postMessage({id:b.id,skin:null,name:c},[c]):postMessage({id:b.id,skin:null,name:null})}};